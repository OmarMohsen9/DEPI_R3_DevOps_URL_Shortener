{"apiVersion":1,"groups":[{"orgId":1,"name":"URL Shortener Evaluation","folder":"alerts","interval":"1m","rules":[{"uid":"df2g2pjci1tz4c","title":"404 Error Rate (per second)","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":21600,"to":0},"datasourceUid":"prometheus-datasource","model":{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus-datasource"},"editorMode":"code","expr":"rate(lookup_failed_total[5m])","instant":true,"interval":"","intervalMs":15000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0.5],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"ad25f9b","panelId":5,"noDataState":"NoData","execErrState":"Error","for":"1m","keepFiringFor":"5m","annotations":{"__dashboardUid__":"ad25f9b","__panelId__":"5","description":"The service is returning more than 0.5 404s per second over 5m","summary":"High 404 rate detected"},"labels":{"alert_type":"http_404","severity":"warning"},"isPaused":false},{"uid":"ef2g3009chgxsb","title":"95th Percentile Latency by Endpoint","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":21600,"to":0},"datasourceUid":"prometheus-datasource","model":{"adhocFilters":[],"datasource":{"type":"prometheus","uid":"prometheus-datasource"},"editorMode":"code","expr":"histogram_quantile(0.95, sum(rate(request_latency_seconds_bucket[5m])) by (le, endpoint))","instant":true,"interval":"","intervalMs":15000,"legendFormat":"__auto","maxDataPoints":43200,"range":false,"refId":"A"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0.5],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"ad25f9b","panelId":4,"noDataState":"NoData","execErrState":"Error","for":"1m","keepFiringFor":"5m","annotations":{"__dashboardUid__":"ad25f9b","__panelId__":"4","description":"95th percentile latency is above 0.5s for more than 5m","summary":"High request latency"},"labels":{"alert_type":"latency","severity":"Critical"},"isPaused":false}]}]}
